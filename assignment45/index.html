<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Attendance Management System</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>📚 Student Attendance Management System</h1>
        <p>Efficient and Modern Attendance Tracking Solution</p>
      </div>
      
        <!-- Authentication Section -->
        <div id="authSection" class="auth-container">
             <div class="auth-card">
                <h2>👨‍🎓 Student Portal</h2>
                <form id="studentLoginForm">
                    <div class="form-group">
                        <label for="studentId">Student ID / Roll Number</label>
                        <input type="text" id="studentId" placeholder="Enter your ID or Roll Number" required>
                    </div>
                    <button type="submit" class="btn">Login</button>
                </form>
            </div>
        </div>

        <!-- Student Dashboard -->
        <div id="studentDashboard" class="dashboard">
            <div class="dashboard-header">
                <h2 class="dashboard-title">Student Dashboard</h2>
                <div>
                    <span id="studentWelcome" style="margin-right: 20px; color: #667eea; font-weight: 500;"></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>

            <div class="attendance-form">
                <h3 style="margin-bottom: 20px; color: #333;">Mark Your Attendance</h3>
                
                <div class="attendance-options">
                    <div class="option-card" onclick="selectAttendanceMethod('rollNumber')">
                        <div style="font-size: 2em; margin-bottom: 10px;">🎫</div>
                        <h4>Roll Number</h4>
                        <p>Enter your roll number</p>
                    </div>
                    <div class="option-card" onclick="selectAttendanceMethod('qrCode')">
                        <div style="font-size: 2em; margin-bottom: 10px;">📱</div>
                        <h4>QR Code</h4>
                        <p>Scan your QR code</p>
                    </div>
                    <div class="option-card" onclick="selectAttendanceMethod('camera')">
                        <div style="font-size: 2em; margin-bottom: 10px;">📷</div>
                        <h4>Camera</h4>
                        <p>Take your picture</p>
                    </div>
                </div>

                <div id="rollNumberForm" style="display: none;">
                    <div class="form-group">
                        <label for="rollNumberInput">Roll Number</label>
                        <input type="text" id="rollNumberInput" placeholder="Enter your roll number">
                    </div>
                    <button onclick="markAttendanceByRoll()" class="btn">Mark Attendance</button>
                </div>

                <div id="qrCodeSection" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h4>Your QR Code</h4>
                        <div id="qrCodeContainer" style="margin: 20px 0;"></div>
                        <button onclick="markAttendanceByQR()" class="btn">Mark Attendance with QR</button>
                    </div>
                </div>

                <div id="cameraSection" class="camera-container">
  <h4>Take Your Picture</h4>
  <div class="preview-area">
    <video id="video" autoplay></video>
    <canvas id="canvas" style="display: none;"></canvas>
  </div>
  <div>
    <button onclick="startCamera()" class="btn">Start Camera</button>
    <button onclick="capturePhoto()" class="btn">Capture & Mark Attendance</button>
  </div>
</div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="studentTotalDays">0</h3>
                    <p>Total Days</p>
                </div>
                <div class="stat-card">
                    <h3 id="studentPresentDays">0</h3>
                    <p>Present Days</p>
                </div>
                <div class="stat-card">
                    <h3 id="studentAttendanceRate">0%</h3>
                    <p>Attendance Rate</p>
                </div>
            </div>
        </div>
    </div>



    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js" defer></script> -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script src="app.js" defer></script>
  </body>
</html>
